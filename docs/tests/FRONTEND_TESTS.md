# フロントエンド テストケース

## 概要

Game Seeker Vaultのフロントエンド機能の手動テストケース集です。

**テスト環境**:
- ブラウザ: Chrome/Safari/Firefox 最新版
- デバイス: デスクトップ、タブレット、スマートフォン

---

## 基本機能テスト

### TC-F001: ページ読み込み

**目的**: アプリケーションが正常に起動するか

**手順**:
1. ブラウザで `http://localhost:5173` にアクセス
2. ページが完全に読み込まれるまで待機

**期待結果**:
- ✅ ヘッダーが表示される
- ✅ ゲーム一覧が表示される（10,000件程度）
- ✅ エラーメッセージが表示されない
- ✅ Console エラーがない

**失敗時の確認**:
- Network タブで `/api/games-data` のレスポンス確認
- Console でエラーログ確認

---

### TC-F002: ゲームデータ取得

**目的**: APIからゲームデータを正常に取得できるか

**手順**:
1. DevTools → Network タブを開く
2. ページリロード
3. `/api/games-data` リクエストを確認

**期待結果**:
- ✅ ステータスコード: 200
- ✅ レスポンスに `meta` と `games` が含まれる
- ✅ `games` 配列に10,000件程度のデータ
- ✅ 各ゲームに `deal.JPY` と `deal.USD` が含まれる

**サンプル確認コマンド（Console）**:
```javascript
fetch('/api/games-data')
  .then(r => r.json())
  .then(d => {
    console.log('Game count:', d.data.games.length);
    console.log('First game:', d.data.games[0]);
    console.log('Has USD:', d.data.games[0].deal.USD ? 'YES' : 'NO');
  });
```

---

## 検索・フィルタ機能テスト

### TC-F003: タイトル検索

**目的**: ゲームタイトルで検索できるか

**手順**:
1. 検索ボックスに「Portal」と入力
2. 結果を確認

**期待結果**:
- ✅ 「Portal」を含むゲームのみ表示
- ✅ 「Portal 2」「Portal」が含まれる
- ✅ 件数が表示される

**失敗パターン**:
- 何も表示されない → 検索ロジック確認
- 全ゲーム表示 → フィルタリング未動作

---

### TC-F004: 価格フィルタ

**目的**: 価格範囲でフィルタリングできるか

**手順**:
1. 最低価格: 500円
2. 最高価格: 1000円
3. 結果を確認

**期待結果**:
- ✅ 500円〜1000円のゲームのみ表示
- ✅ 無料ゲーム（0円）は表示されない
- ✅ 1001円以上のゲームは表示されない

---

### TC-F005: ジャンルフィルタ

**目的**: ジャンルでフィルタリングできるか

**手順**:
1. 「Action」をクリック
2. 結果を確認

**期待結果**:
- ✅ Actionジャンルのゲームのみ表示
- ✅ 他ジャンルは表示されない
- ✅ ボタンがアクティブ状態になる

---

### TC-F006: 除外フィルタ

**目的**: Shift + クリックで除外できるか

**手順**:
1. Shift キーを押しながら「Sports」をクリック
2. 結果を確認

**期待結果**:
- ✅ Sportsジャンルが除外される
- ✅ ボタンが赤い ✖︎ マークになる
- ✅ Sports以外のゲームが表示される

---

## コレクション機能テスト

### TC-F007: コレクションモーダル表示

**目的**: コレクションモーダルが開くか

**手順**:
1. ヘッダーの「★ コレクション」ボタンをクリック
2. モーダルが表示されることを確認

**期待結果**:
- ✅ モーダルが表示される
- ✅ デフォルトフォルダが3つ表示される
  - 気になるリスト
  - 購入予定リスト（ユーザーが作成していれば）
  - 所有リスト

---

### TC-F008: ゲーム追加

**目的**: ゲームをコレクションに追加できるか

**手順**:
1. ゲームカードの ⭐️ アイコンをクリック
2. コレクションモーダルを開く
3. 「気になるリスト」を確認

**期待結果**:
- ✅ ⭐️ アイコンが黄色くなる
- ✅ 「気になるリスト」にゲームが追加される
- ✅ 件数が増える

**IndexedDB確認**:
```javascript
// DevTools → Application → IndexedDB → GameSeekerVaultDB → collection
// 新しいレコードが追加されているか確認
```

---

### TC-F009: フォルダ作成

**目的**: 新しいフォルダを作成できるか

**手順**:
1. コレクションモーダルを開く
2. 「新規フォルダ」ボタンをクリック
3. 「セール待ち」と入力
4. OKをクリック

**期待結果**:
- ✅ 「セール待ち」フォルダが作成される
- ✅ フォルダ一覧に表示される
- ✅ sortOrder が正しく設定される

**IndexedDB確認**:
```javascript
// folders ストアに新しいレコードが追加されているか
```

---

### TC-F010: フォルダ削除

**目的**: フォルダを削除できるか

**手順**:
1. コレクションモーダルを開く
2. ユーザー作成フォルダにホバー
3. ゴミ箱アイコンをクリック
4. 確認ダイアログで「OK」

**期待結果**:
- ✅ フォルダが削除される
- ✅ フォルダ内のゲームも削除される
- ✅ IndexedDBから削除される

**制約**:
- ❌ 「気になるリスト」は削除不可
- ❌ 「所有リスト」は削除不可

---

### TC-F011: ドラッグ&ドロップ（ゲーム）

**目的**: ゲームをドラッグ&ドロップで並び替えできるか

**手順**:
1. コレクションモーダルを開く
2. ゲームの左端のドラッグハンドル（6つの点）にホバー
3. ドラッグして別の位置にドロップ

**期待結果**:
- ✅ ゲームの順序が入れ替わる
- ✅ sortOrder が更新される
- ✅ 300ms のフェードアニメーション

---

### TC-F012: ドラッグ&ドロップ（フォルダ）

**目的**: フォルダをドラッグ&ドロップで並び替えできるか

**手順**:
1. コレクションモーダルを開く
2. ユーザー作成フォルダをドラッグ
3. 別の位置にドロップ

**期待結果**:
- ✅ フォルダの順序が入れ替わる
- ✅ sortOrder が更新される

**制約**:
- ❌ 「気になるリスト」は常に最上位（移動不可）
- ❌ 「所有リスト」は常に最下位（移動不可）

---

## インポート/エクスポート機能テスト

### TC-F013: エクスポート

**目的**: コレクションをJSONファイルにエクスポートできるか

**手順**:
1. ヘッダーのインポート/エクスポートボタンをクリック
2. 「全フォルダをエクスポート」をクリック

**期待結果**:
- ✅ `steam-collection_YYYY-MMDD-HHMM.json` がダウンロードされる
- ✅ ファイルに `folders` と `games` が含まれる
- ✅ フォルダに `sortOrder` が含まれる

**ファイル検証**:
```javascript
// ダウンロードしたJSONファイルを確認
{
  "exportedAt": "2025-01-25 14:30:00",
  "version": "1.0",
  "folders": [
    {
      "name": "気になるリスト",
      "createdAt": "...",
      "sortOrder": 1
    }
  ],
  "games": [...]
}
```

---

### TC-F014: インポート

**目的**: JSONファイルからコレクションをインポートできるか

**手順**:
1. 事前にエクスポートしたJSONファイルを用意
2. インポート/エクスポートモーダルを開く
3. 「ファイルを選択」でJSONファイルを選択
4. 「インポート」をクリック

**期待結果**:
- ✅ フォルダが復元される
- ✅ ゲームが復元される
- ✅ sortOrder が保持される
- ✅ 成功メッセージが表示される

**衝突時の動作**:
- 既存フォルダ: sortOrder を更新
- 新規フォルダ: max+1 から採番

---

## 多言語化テスト

### TC-F015: 言語切り替え

**目的**: 日本語/英語を切り替えできるか

**手順**:
1. ヘッダーの言語切り替えボタンをクリック
2. UIの表示を確認

**期待結果（英語）**:
- ✅ ボタンラベル: 「Collection」「Settings」
- ✅ 価格: `$17.00` 形式

**期待結果（日本語）**:
- ✅ ボタンラベル: 「コレクション」「設定」
- ✅ 価格: `¥2,550` 形式

---

### TC-F016: 言語設定の永続化

**目的**: 言語設定が保存されるか

**手順**:
1. 言語を「日本語」に変更
2. ページリロード
3. 言語設定を確認

**期待結果**:
- ✅ 日本語のまま表示される
- ✅ IndexedDB settings ストアに `locale: "ja"` が保存される

---

## 設定機能テスト

### TC-F017: 設定モーダル表示

**目的**: 設定モーダルが開くか

**手順**:
1. ヘッダーの設定アイコンをクリック
2. モーダルが表示されることを確認

**期待結果**:
- ✅ 設定項目が一覧表示される
- ✅ 現在の設定値が反映されている

---

### TC-F018: テーマ変更

**目的**: テーマを変更できるか

**手順**:
1. 設定モーダルを開く
2. テーマを「Steam」に変更
3. UIを確認

**期待結果**:
- ✅ 背景が暗色になる
- ✅ テキスト色が明色になる
- ✅ Steam風のデザインになる

---

## レスポンシブデザインテスト

### TC-F019: モバイル表示

**目的**: スマートフォンで正常に表示されるか

**手順**:
1. DevTools → デバイスモード（iPhone 14 Pro）
2. ページを確認

**期待結果**:
- ✅ 1カラム表示
- ✅ タップ可能な要素が十分な大きさ
- ✅ 横スクロールが発生しない

---

### TC-F020: タブレット表示

**目的**: タブレットで正常に表示されるか

**手順**:
1. DevTools → デバイスモード（iPad Pro）
2. ページを確認

**期待結果**:
- ✅ 2カラム表示
- ✅ レイアウトが崩れない

---

## パフォーマンステスト

### TC-F021: 仮想スクロール

**目的**: 10,000件のゲームを高速スクロールできるか

**手順**:
1. ゲーム一覧を表示
2. 高速にスクロール（マウスホイールまたはスワイプ）
3. パフォーマンスを確認

**期待結果**:
- ✅ スクロールがスムーズ（60fps）
- ✅ カクつきがない
- ✅ メモリ使用量が安定している

**パフォーマンス確認**:
```javascript
// DevTools → Performance タブで録画
// FPS が 50fps 以上であることを確認
```

---

## エラーハンドリングテスト

### TC-F022: ネットワークエラー

**目的**: オフライン時に適切なエラーメッセージが表示されるか

**手順**:
1. DevTools → Network → Offline に設定
2. ページリロード

**期待結果**:
- ✅ エラーメッセージが表示される
- ✅ 「Failed to fetch games data」などの説明

---

### TC-F023: 無効なJSONインポート

**目的**: 無効なJSONファイルのインポートを拒否できるか

**手順**:
1. テキストファイル（`.txt`）を用意
2. インポートを試行

**期待結果**:
- ✅ エラーメッセージ: 「無効なファイル形式です」
- ✅ インポートが実行されない

---

## ブラウザ互換性テスト

### TC-F024: Chrome

**環境**: Chrome 最新版

**確認項目**:
- ✅ 全機能が動作する
- ✅ IndexedDB が動作する
- ✅ ドラッグ&ドロップが動作する

---

### TC-F025: Safari

**環境**: Safari 最新版

**確認項目**:
- ✅ 全機能が動作する
- ✅ IndexedDB が動作する
- ✅ ドラッグ&ドロップが動作する

**既知の問題**:
- （もしあれば記載）

---

### TC-F026: Firefox

**環境**: Firefox 最新版

**確認項目**:
- ✅ 全機能が動作する
- ✅ IndexedDB が動作する
- ✅ ドラッグ&ドロップが動作する

---

## テスト実行チェックリスト

### リリース前チェック

- [ ] TC-F001: ページ読み込み
- [ ] TC-F002: ゲームデータ取得
- [ ] TC-F003: タイトル検索
- [ ] TC-F007: コレクションモーダル表示
- [ ] TC-F008: ゲーム追加
- [ ] TC-F009: フォルダ作成
- [ ] TC-F013: エクスポート
- [ ] TC-F014: インポート
- [ ] TC-F015: 言語切り替え
- [ ] TC-F024: Chrome 互換性
- [ ] TC-F025: Safari 互換性

### フルテスト（メジャーリリース前）

- [ ] 全テストケース実行

---

## 関連ドキュメント

- [../FRONTEND_GUIDE.md](../FRONTEND_GUIDE.md) - フロントエンド開発ガイド
- [../DATA_STRUCTURE.md](../DATA_STRUCTURE.md) - データ構造仕様
